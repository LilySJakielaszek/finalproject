---
title: "FinalProjectData"
authors: "Lily Jakielaszek, Allison Denenberg, Ayoolwatomiwa Ogunrombi"
output: html_notebook
---

### Load the Libraries and Datasets
```{r}
# front matter
rm(list = ls())
library(DataComputing)
library(lubridate)
library(tidyverse)
library(rvest)
library(mosaic)
OccupationProjection <- read.csv("https://query.data.world/s/hfgf3loqzzbk34aytghvne5sxg3ljr", header=TRUE, stringsAsFactors=FALSE);

OccupationProjection<-OccupationProjection%>%
  filter(Occupation.Name!="Total, All Occupations")

salaries_by_region = readr::read_csv("salaries-by-region.csv")

salaries_by_college_type = readr::read_csv("salaries-by-college-type.csv")

degrees_that_pay_back = readr::read_csv("degrees-that-pay-back.csv")
```
# Research Question

What school, major, and occupation should a prospective college student choose (what is the game plan)?

## Make New Datasets

These datasets will be the ones that will be used to perform statistics on and joins on. They are renamed from the original datasets and include all the same information except they have R acceptable variable names and the correct type for the their output. 

```{r}
SalariesByRegion <-
  salaries_by_region %>%
  mutate(School_Name = `School Name`,
         Mid_Career_Median_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career Median Salary`)),
         Starting_Median_Salary = as.numeric(gsub('\\$|,', '', `Starting Median Salary`)),
         Mid_Career_10th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 10th Percentile Salary`)),
         Mid_Career_25th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 25th Percentile Salary`)),
         Mid_Career_75th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 75th Percentile Salary`)),
         Mid_Career_90th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 90th Percentile Salary`)),
         Difference = Mid_Career_Median_Salary - Starting_Median_Salary) 
SalariesByRegion <- 
  SalariesByRegion %>%
  select(School_Name, Region, Mid_Career_Median_Salary, Starting_Median_Salary, Mid_Career_10th_Percentile_Salary, Mid_Career_25th_Percentile_Salary, Mid_Career_75th_Percentile_Salary, Mid_Career_90th_Percentile_Salary, Difference)
SalariesByRegion
```
```{r}
SalariesByCollegeType <-
  salaries_by_college_type %>%
  mutate(School_Name = `School Name`,
         School_Type = `School Type`,
         Mid_Career_Median_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career Median Salary`)),
         Starting_Median_Salary = as.numeric(gsub('\\$|,', '', `Starting Median Salary`)),
         Mid_Career_10th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 10th Percentile Salary`)),
         Mid_Career_25th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 25th Percentile Salary`)),
         Mid_Career_75th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 75th Percentile Salary`)),
         Mid_Career_90th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 90th Percentile Salary`)),
         Difference = Mid_Career_Median_Salary - Starting_Median_Salary)
SalariesByCollegeType <-
  SalariesByCollegeType %>%
  select(School_Name, School_Type, Starting_Median_Salary, Mid_Career_Median_Salary, Mid_Career_10th_Percentile_Salary, Mid_Career_25th_Percentile_Salary, Mid_Career_75th_Percentile_Salary, Mid_Career_90th_Percentile_Salary, Difference)
SalariesByCollegeType
```

```{r}
DegreesThatPayBack <-
  degrees_that_pay_back %>%
  mutate(Undergraduate_Major = `Undergraduate Major`,
         Mid_Career_Median_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career Median Salary`)),
         Starting_Median_Salary = as.numeric(gsub('\\$|,', '', `Starting Median Salary`)),
         Mid_Career_10th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 10th Percentile Salary`)),
         Mid_Career_25th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 25th Percentile Salary`)),
         Mid_Career_75th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 75th Percentile Salary`)),
         Mid_Career_90th_Percentile_Salary = as.numeric(gsub('\\$|,', '', `Mid-Career 90th Percentile Salary`)),
         Percent_Change_From_Starting_To_MidCareer_Salary = `Percent change from Starting to Mid-Career Salary`,
         Difference = Mid_Career_Median_Salary - Starting_Median_Salary)
DegreesThatPayBack <-
  DegreesThatPayBack %>%
  select(Undergraduate_Major, Starting_Median_Salary, Mid_Career_Median_Salary, Mid_Career_10th_Percentile_Salary, Mid_Career_25th_Percentile_Salary, Mid_Career_75th_Percentile_Salary, Mid_Career_90th_Percentile_Salary, Percent_Change_From_Starting_To_MidCareer_Salary, Difference)
DegreesThatPayBack
```
```{r}
OccupationsProjection <-
  OccupationProjection %>%
  mutate(State_FIPS = State.FIPS,
         Region = Area.Name,
         Occupation_Code = Occupation.Code,
         Occupation_Name = Occupation.Name,
         Base_Year = Base.Year,
         Base_Salary = Base,
         Projected_Year = Projected.Year,
         Projected_Salary = Projection,
         Percent_Change = Percent.Change,
         Average_Annual_Openings = Average.Annual.Openings) 
OccupationsProjection <-
  OccupationsProjection %>%
  select(State_FIPS, Region, Occupation_Code, Occupation_Name, Base_Year, Base_Salary, Projected_Year, Projected_Salary, Percent_Change, Average_Annual_Openings) 
OccupationsProjection
```
### Inspecting the Revised Datasets 
## OccupationProjection Inspection
```{r}
str(OccupationProjection)
head(OccupationProjection)
tail(OccupationProjection)
nrow(OccupationProjection)
```

## DegreesThatPayBack Inspection
```{r}
str(DegreesThatPayBack)
head(DegreesThatPayBack)
tail(DegreesThatPayBack)
nrow(DegreesThatPayBack)
```

## SalariesByCollegeType Inspection
```{r}
str(SalariesByCollegeType)
head(SalariesByCollegeType)
tail(SalariesByCollegeType)
nrow(SalariesByCollegeType)
```

## SalariesByRegion Inspection
```{r}
str(SalariesByRegion)
head(SalariesByRegion)
tail(SalariesByRegion)
nrow(SalariesByRegion)
```

### First Step in Game Plan: Find the Schools with the Highest Salaries

Join the datasets together to match up the school names. 
```{r}
SchoolSalaries <-
  SalariesByCollegeType %>%
  full_join(SalariesByRegion)
head(SchoolSalaries)
```

Now we will observe the top ten schools with the highest starting median salaries 
```{r}
SchoolSalaries %>%
  select(School_Name, School_Type, Region, Starting_Median_Salary) %>%
  arrange(desc(Starting_Median_Salary)) %>% 
  head(10)
```

Now we will find the top ten schools with the highest mid-career median salaries 
```{r}
SchoolSalaries %>%
  select(School_Name, School_Type, Region, Mid_Career_Median_Salary) %>%
  arrange(desc(Mid_Career_Median_Salary)) %>% 
  head(10)
```
At this point we can see that California and NorthEastern schools are in the top ten consistenly. We can also see that the top school types are Ivy League and Engineering schools. 

Now we will combine these results to find the best school for percent change from starting to mid-career median salary which will show the best school for salary growth over time
```{r}
SchoolSalaries %>%
  mutate(Percent_Change = ((Mid_Career_Median_Salary - Starting_Median_Salary)/Starting_Median_Salary) * 100) %>%
  select(School_Name, School_Type, Percent_Change) %>%
  arrange(desc(Percent_Change)) %>%
  head(10)
```

## Visualizations on Schools and Salaries 







### Conclusions on Schools and Salaries 

We can conclude that the school to pick if you want the highest starting median salary is California Institute of Technology (CIT) with a salary amount of $75,500, the school to pick if you want the highest mid-career median salary is Dartmouth College with a salary amount of $134,000, and the school to pick if you want the best salary growth over time is DartMouth College with a salary percent growth from starting to mid-career median salary of 131.0345%. 

# Second Step in Game Plan: Finding the Majors with the Highest Salaries 

We will be using the DegreesThatPayBack dataset to answer this part of the game plan

First we will look at the top ten majors with the best starting median salary
```{r}
head(DegreesThatPayBack)
DegreesThatPayBack %>%
  select(Undergraduate_Major, Starting_Median_Salary) %>%
  arrange(desc(Starting_Median_Salary)) %>%
  head(10)
```
From this we can see that the best major for starting median salary is a Physician Assistant

Now we will look at the top ten majors with the best mid-career median salary
```{r}
DegreesThatPayBack %>%
  select(Undergraduate_Major, Mid_Career_Median_Salary) %>%
  arrange(desc(Mid_Career_Median_Salary)) %>%
  head(10)
```
From this we can see that the best major for mid-career median salary is Chemical Engineering

Now we will look at the top ten majors with the best percentage change from starting to mid-career median salary to see which major offers the best growth in salary
```{r}
DegreesThatPayBack %>%
  select(Undergraduate_Major, Percent_Change_From_Starting_To_MidCareer_Salary) %>%
  arrange(desc(Percent_Change_From_Starting_To_MidCareer_Salary)) %>%
  head(10)
```
From this we can see that Math is best major for average salary growth 

## Visualization of Majors and Salaries





### Conclusions of Majors and Salaries

With these results we can conclude that the best major if you want the highest starting median salary is Physician Assistant at $74,300, the best major if you want the highest mid-career median salary is Chemical Engineering	at $107,000, and the best major for greatest percent growth from starting to mid-career median salary is Math at 103.5%.

# Third Step in Game Plan: Finding the Occupations with the Highest Salaries 

We will be using the OccupationProjection dataset for the evaluation of this step in the game plan

First we will look at the occupations with the highest projected salary in 2024
```{r}
head(OccupationsProjection)
OccupationsProjection %>%
  select(Occupation_Name, Projected_Year, Projected_Salary) %>%
  arrange(desc(Projected_Salary)) %>%
  head(10)
```

